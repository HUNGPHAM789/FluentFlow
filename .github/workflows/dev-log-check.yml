name: Check AI Dev Log

on:
  push:
    branches:
      - main
      - master
      - develop
  pull_request:

jobs:
  check-ai-log:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Check if AI log file exists
        run: |
          if [ ! -f "ai_logs/change-log.txt" ]; then
            echo "❌ ai_logs/change-log.txt not found."
            echo "Make sure Google AI Studio (GAS) is writing logs to this file."
            exit 1
          else
            echo "✅ ai_logs/change-log.txt found."
          fi

      - name: Show last 40 lines of AI dev log
        run: |
          echo "=== Last 40 lines of ai_logs/change-log.txt ==="
          tail -n 40 ai_logs/change-log.txt || echo "(Log file is empty)"
          echo "==============================================="
